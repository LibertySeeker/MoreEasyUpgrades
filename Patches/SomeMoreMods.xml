<?xml version="1.0" encoding="utf-8"?>

<!--Expanded Materials: Metals-->
<Patch>
  <Operation Class="PatchOperationSequence" MayRequire="Argon.ExpandedMaterials.Metals">
    <success>Always</success>
    <operations>
      <!-- Add the Upgrade comp to Fueled Alloy Furnace -->
      <li Class="PatchOperationAdd" MayRequire="Argon.ExpandedMaterials.Metals">
        <xpath>/Defs/ThingDef[defName="EM_FueledAlloyFurnace"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompUpgrade</compClass>
            <linkedThing>EM_ElectricAlloyFurnace</linkedThing>
            <keyedTooltipString>EU.UpgradeAlloyFurnace</keyedTooltipString>
            <researchPrerequisites>
              <li>Electricity</li>
            </researchPrerequisites>
            <additionalRequiredResources>
              <Steel>50</Steel>
              <ComponentIndustrial>3</ComponentIndustrial>
            </additionalRequiredResources>
          </li>
        </value>
      </li>
      <!-- Add the Downgrade comp to Electric Alloy Furnace -->
      <li Class="PatchOperationAdd" MayRequire="Argon.ExpandedMaterials.Metals">
        <xpath>/Defs/ThingDef[defName="EM_ElectricAlloyFurnace"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompDowngrade</compClass>
            <linkedThing>EM_FueledAlloyFurnace</linkedThing>
            <keyedTooltipString>EU.DowngradeAlloyFurnace</keyedTooltipString>
            <refundedResources>
              <Steel>50</Steel>
              <ComponentIndustrial>3</ComponentIndustrial>
            </refundedResources>
          </li>
        </value>
      </li>
    </operations>
  </Operation>
</Patch>

<!--Repairable Gear-->
<Patch>
  <Operation Class="PatchOperationSequence" MayRequire="SteveZero.RepairableGear">
    <success>Always</success>
    <operations>
      <!-- Add the Upgrade comp to Simple Repair Table-->
      <li Class="PatchOperationAdd" MayRequire="SteveZero.RepairableGear">
        <xpath>/Defs/ThingDef[defName="RG_SimpleRepairTable"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompUpgrade</compClass>
            <linkedThing>RG_ElectricRepairTable</linkedThing>
            <keyedTooltipString>EU.UpgradeRepairTable</keyedTooltipString>
            <researchPrerequisites>
              <li>Electricity</li>
            </researchPrerequisites>
            <additionalRequiredResources>
              <Steel>30</Steel>
              <ComponentIndustrial>5</ComponentIndustrial>
            </additionalRequiredResources>
          </li>
        </value>
      </li>
      <!-- Add the Downgrade comp to Electric Repair Table -->
      <li Class="PatchOperationAdd" MayRequire="SteveZero.RepairableGear">
        <xpath>/Defs/ThingDef[defName="RG_ElectricRepairTable"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompDowngrade</compClass>
            <linkedThing>RG_SimpleRepairTable</linkedThing>
            <keyedTooltipString>EU.DowngradeRepairTable</keyedTooltipString>
            <refundedResources>
              <Steel>30</Steel>
              <ComponentIndustrial>5</ComponentIndustrial>
            </refundedResources>
          </li>
        </value>
      </li>
    </operations>
  </Operation>
</Patch>

<!--Colony Manager Redux-->
<Patch>
  <Operation Class="PatchOperationSequence" MayRequire="ilyvion.colonymanagerredux">
    <success>Always</success>
    <operations>
      <!-- Add the Upgrade comp to Basic Manager Station -->
      <li Class="PatchOperationAdd" MayRequire="ilyvion.colonymanagerredux">
        <xpath>/Defs/ThingDef[defName="CM_BasicManagerStation"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompUpgrade</compClass>
            <linkedThing>CM_ManagerStation</linkedThing>
            <keyedTooltipString>EU.UpgradeManagerStation</keyedTooltipString>
            <researchPrerequisites>
              <li>Electricity</li>
            </researchPrerequisites>
            <additionalRequiredResources>
              <Steel>75</Steel>
              <Silver>1</Silver>
            </additionalRequiredResources>
          </li>
        </value>
      </li>
      <!-- Add the Downgrade comp to Manager Station -->
      <li Class="PatchOperationAdd" MayRequire="ilyvion.colonymanagerredux">
        <xpath>/Defs/ThingDef[defName="CM_ManagerStation"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompDowngrade</compClass>
            <linkedThing>CM_BasicManagerStation</linkedThing>
            <keyedTooltipString>EU.DowngradeManagerStation</keyedTooltipString>
            <refundedResources>
              <Steel>75</Steel>
              <Silver>1</Silver>
            </refundedResources>
          </li>
        </value>
      </li>
    </operations>
  </Operation>
</Patch>

<!--Vanilla Books Expanded-->
<Patch>
  <Operation Class="PatchOperationSequence" MayRequire="VanillaExpanded.VBooksE">
    <success>Always</success>
    <operations>
      <!-- Add the Upgrade comp to Writer Table -->
      <li Class="PatchOperationAdd" MayRequire="VanillaExpanded.VBooksE">
        <xpath>/Defs/ThingDef[defName="VBE_WritersTable"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompUpgrade</compClass>
            <linkedThing>VBE_TypewritersTable</linkedThing>
            <keyedTooltipString>EU.UpgradeWritersTable</keyedTooltipString>
            <researchPrerequisites>
              <li>Electricity</li>
			  <li>VBE_Printing</li>
            </researchPrerequisites>
            <additionalRequiredResources>
              <Steel>20</Steel>
              <ComponentIndustrial>1</ComponentIndustrial>
            </additionalRequiredResources>
          </li>
        </value>
      </li>
      <!-- Add the Downgrade comp to Typewriter Table -->
      <li Class="PatchOperationAdd" MayRequire="VanillaExpanded.VBooksE">
        <xpath>/Defs/ThingDef[defName="VBE_TypewritersTable"]/comps</xpath>
        <value>
          <li Class="EasyUpgrades.CompProperties_Upgradable">
            <compClass>EasyUpgrades.CompDowngrade</compClass>
            <linkedThing>VBE_WritersTable</linkedThing>
            <keyedTooltipString>EU.DowngradeWritersTable</keyedTooltipString>
            <refundedResources>
              <Steel>20</Steel>
              <ComponentIndustrial>1</ComponentIndustrial>
            </refundedResources>
          </li>
        </value>
      </li>
    </operations>
  </Operation>
</Patch>
